import{d as R,u as v,k as D,r as O,o as A,c as l,w as t,a as o,e as m,f as z,g as M,t as n,b as E,h as i,s as a,m as F,j as _,F as b,a6 as L,x as V,L as G,B as W}from"./index-b744bed0.js";import{S as j}from"./index-c701fe21.js";import{E as H}from"./index-479e4c76.js";import{k as q,l as U,T as J,C as K}from"./index-25c840a0.js";import{a as p,c as P,d as u,e as g}from"./constEnums-5f5dc902.js";import{I as Q}from"./index-beccc506.js";const X={class:"p-[10px]"},Y={class:"text-[15px] font-bold"},Z={class:"text-[12px] --van-gray-6"},ee={class:"text-red-500 text-[16px]"},ie=R({__name:"myAgreement",setup(te){v();const $=D(),y=O(),N=async()=>{const{data:s}=await q();y.value=s},f=(s,r={})=>{$.push({path:"/agreement",query:{id:s.id,...r}})},h=s=>{const r=v();L({title:r.t("agreement.earlyTermination"),message:r.t("agreement.confirmTermination"),cancelButtonText:r.t("common.cancel"),confirmButtonText:r.t("common.ok")}).then(async()=>{await U({id:s.id,status:u.TO_BE_CONFIRMED}),V({type:"success",message:r.t("common.success")}),s.leaseStatus=u.TO_BE_CONFIRMED}).catch(()=>{})};return A(async()=>{await N()}),(s,r)=>{const d=J,T=G,x=Q,k=W,w=K,B=H,I=j;return o(),l(I,{row:20,loading:!y.value},{default:t(()=>{var C;return[m("div",X,[(o(!0),z(b,null,M(y.value,e=>(o(),l(w,{class:"rounded-xl shadow",key:e.id,onClick:c=>f(e)},{title:t(()=>[m("h2",Y,n(`${e.apartmentName} ${e.roomNumber}${s.$t("agreement.room")}`),1)]),desc:t(()=>[m("div",null,[m("span",Z,n(`${e.leaseStartDate} ${s.$t("agreement.leaseStart")} ${e.leaseEndDate}`),1)])]),tag:t(()=>[E(d,{type:"primary",size:"medium",class:"translate-y-[-3px]"},{default:t(()=>[i(n(a(p)(a(P),e.sourceType)),1)]),_:2},1024)]),thumb:t(()=>{var c,S;return[E(x,{class:"w-full h-full object-cover",src:((S=(c=e.roomGraphVoList)==null?void 0:c[0])==null?void 0:S.url)||s.$t("common.loadFailed")},{error:t(()=>[i(n(s.$t("common.loadFailed")),1)]),loading:t(()=>[E(T,{type:"spinner",size:"20"})]),_:2},1032,["src"])]}),tags:t(()=>[e.leaseStatus===a(u).WAITING?(o(),l(d,{key:0,class:"mt-[5px]",type:"primary",size:"medium"},{default:t(()=>[i(n(a(p)(a(g),e.leaseStatus)),1)]),_:2},1024)):e.leaseStatus===a(u).RENEW_TO_BE_CONFIRMED?(o(),l(d,{key:1,class:"mt-[5px]",type:"primary",size:"medium"},{default:t(()=>[i(n(a(p)(a(g),e.leaseStatus)),1)]),_:2},1024)):e.leaseStatus===a(u).SIGNED?(o(),l(d,{key:2,class:"mt-[5px]",type:"success",size:"medium"},{default:t(()=>[i(n(a(p)(a(g),e.leaseStatus)),1)]),_:2},1024)):e.leaseStatus===a(u).TO_BE_CONFIRMED?(o(),l(d,{key:3,class:"mt-[5px]",type:"danger",size:"medium"},{default:t(()=>[i(n(a(p)(a(g),e.leaseStatus)),1)]),_:2},1024)):(o(),l(d,{key:4,class:"mt-[5px]",type:"default",size:"medium"},{default:t(()=>[i(n(a(p)(a(g),e.leaseStatus)),1)]),_:2},1024))]),price:t(()=>[m("div",null,[r[1]||(r[1]=m("span",{class:"text-red-500 text-[14px]"},"ï¿¥",-1)),m("span",ee,n(e.rent)+"/"+n(s.$t("agreement.month")),1)])]),footer:t(()=>[m("div",{class:"absolute bottom-[7px] right-[15px]",onClick:r[0]||(r[0]=F(()=>{},["stop"]))},[e.leaseStatus===a(u).RENEW_TO_BE_CONFIRMED?(o(),l(k,{key:0,size:"mini",type:"primary",plain:"",onClick:c=>f(e,{isRenew:!0,isEdit:!0,isAdd:!1})},{default:t(()=>[i(n(s.$t("agreement.renew")),1)]),_:2},1032,["onClick"])):_("",!0),e.leaseStatus===a(u).RENEW_TO_BE_CONFIRMED?(o(),l(k,{key:1,size:"mini",type:"primary",plain:"",onClick:c=>f(e,{isRenew:!0,isEdit:!0,isAdd:!1})},{default:t(()=>[i(n(s.$t("agreement.renew")),1)]),_:2},1032,["onClick"])):_("",!0),e.leaseStatus===a(u).WAITING?(o(),l(k,{key:2,size:"mini",type:"primary",plain:"",onClick:c=>f(e,{isEdit:!0,isConfirm:!0})},{default:t(()=>[i(n(s.$t("agreement.modify")),1)]),_:2},1032,["onClick"])):_("",!0),e.leaseStatus===a(u).SIGNED?(o(),l(k,{key:3,size:"mini",plain:"",type:"danger",onClick:c=>h(e)},{default:t(()=>[i(n(s.$t("agreement.earlyTermination")),1)]),_:2},1032,["onClick"])):_("",!0)])]),_:2},1032,["onClick"]))),128))]),((C=y.value)==null?void 0:C.length)<=0?(o(),l(B,{key:0,description:s.$t("common.noResults")},null,8,["description"])):_("",!0)]}),_:1},8,["loading"])}}});export{ie as default};
