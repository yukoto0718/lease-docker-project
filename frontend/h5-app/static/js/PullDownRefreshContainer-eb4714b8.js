import{r as s,o as I,S as N,d as D,C as $,f as h,b,w as y,T as q,bj as B,a as f,am as E,v as F,aq as S,e as R,c as M,h as O,t as w,j as V,L as j,_ as z}from"./index-b744bed0.js";import{P as T}from"./index-ae057aef.js";import{E as U}from"./index-479e4c76.js";const A=(t,c)=>{const n=s(!1),a=(r,l)=>{r.forEach(u=>{u.isIntersecting?n.value=!0:n.value=!1})},o=new IntersectionObserver(a,c);return I(()=>{t.value&&o.observe(t.value)}),N(()=>{t.value&&o.unobserve(t.value)}),n},G=A,H={key:1,class:"finish-text"},J=D({__name:"PullDownRefreshContainer",props:{request:{type:Function,default:()=>({})}},setup(t,{expose:c}){const n=t,a=s({current:1,size:10}),o=s(!1),r=s(!1),l=s(!1),u=s(null),g=G(u,{threshold:1}),d=s(null);$(g,e=>{console.log("bottomLoadRefIsVisibility",e),!o.value&&e&&p()});const v=async()=>{k(),await p(),o.value=!1};async function p(){l.value||(r.value=!0,await m(),r.value=!1)}function k(){a.value={current:1,size:10},_()}async function m(){await n.request(a.value),a.value.current++}function _(e=!1){l.value=e}return I(()=>{m()}),c({onRefresh:v,setFinished:_}),(e,i)=>{const x=U,L=j,C=T;return f(),h("div",null,[b(C,q(B(),{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=P=>o.value=P),onRefresh:v}),{default:y(()=>[E(e.$slots,"default",{},()=>[b(x,{ref_key:"searchNotFoundRef",ref:d,description:e.$t("common.noResults")},null,8,["description"])],!0),F(R("div",{class:"text-center h-[50px] pt-[10px]",ref_key:"bottomLoadRef",ref:u,id:"bottomLoadRef"},[r.value&&!l.value?(f(),M(L,{key:0},{default:y(()=>[O(w(e.$t("common.loading")),1)]),_:1})):V("",!0),l.value?(f(),h("span",H,w(e.$t("router.noMore")),1)):V("",!0)],512),[[S,!d.value&&!o.value]]),i[1]||(i[1]=R("div",{class:"h-[50px]"},null,-1))]),_:3},16,["modelValue"])])}}});const X=z(J,[["__scopeId","data-v-167d3280"]]);export{X as P};
