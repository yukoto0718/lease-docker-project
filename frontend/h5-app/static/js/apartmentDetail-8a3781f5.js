import{d as D,u as R,P,a as l,f as m,t as n,_ as S,k as z,O as W,r as x,o as O,c as u,w as i,e as t,b as r,g as v,h as y,F as f,j as G,L as K,B as Q}from"./index-b744bed0.js";import{S as U}from"./index-c701fe21.js";/* empty css              */import{C as X,R as Y}from"./index-10ea773f.js";import{_ as Z}from"./index-e727719b.js";import{f as tt,h as et,T as at}from"./index-25c840a0.js";import{u as nt}from"./useLeafletMap-e166f95b.js";import{_ as ot}from"./RoomCard.vue_vue_type_script_setup_true_lang-7636b39d.js";import{P as st}from"./PullDownRefreshContainer-eb4714b8.js";import{I as it}from"./index-beccc506.js";import{S as lt,a as rt}from"./index-515de819.js";import{S as ct}from"./index-3959dc36.js";import"./index-ae057aef.js";import"./index-479e4c76.js";const dt={class:"translatable-text"},pt=D({__name:"TranslatableText",props:{text:{type:String,default:""},textEn:{type:String,default:""},textJa:{type:String,default:""}},setup(g){const d=g,{locale:_}=R(),e=P(()=>_.value.startsWith("en")&&d.textEn?d.textEn:_.value.startsWith("ja")&&d.textJa?d.textJa:d.text);return(w,p)=>(l(),m("span",dt,n(e.value),1))}});const _t=S(pt,[["__scopeId","data-v-810df4e4"]]),ut={class:"page-container"},mt={class:"card"},vt={class:"font-bold"},ft={class:"my-[7px]"},ht={class:"text-red-500 text-[18px]"},xt={class:"card"},yt={class:"base-info-title py-[4px]"},gt={class:"my-[5px]"},wt={class:"card"},kt={class:"base-info-title py-[4px]"},bt={class:"my-[5px]"},It={class:"flex flex-col justify-center items-center"},Dt={class:"text-center"},Rt={class:"card"},St={class:"base-info-title py-[4px]"},Tt={class:"my-[5px]"},Ct={class:"text-xs mb-[5px]"},Lt={class:"card"},$t={class:"base-info-title py-[4px]"},Bt={class:"mt-[5px]"},Vt=D({__name:"apartmentDetail",setup(g){R();const d=z(),_=W(),e=x({}),w=async()=>{const{data:a}=await tt(_.query.id);e.value=a},p=x([]),k=x();async function T(a){var c;const{data:s}=await et({id:_.query.id,...a});s.records.forEach(h=>{h.apartmentInfo=e.value}),console.log("pageInfo.current",a.current),a.current===1?p.value=s.records:p.value=[...p.value,...s.records],(c=k.value)==null||c.setFinished(p.value.length>=s.total)}const{initMap:C,openExternalMap:L}=nt(),$=()=>{if(e.value){const{longitude:a,latitude:s,name:c}=e.value;L(+s,+a,c)}};function B(){if(e.value){const{longitude:a,latitude:s,name:c}=e.value;C("container",{lat:+s,lng:+a},c)}}const V=()=>{console.log("appointmentToViewHandle"),d.push({path:"/appointment",query:{apartmentId:e.value.id}})};return O(async()=>{await w(),e.value&&B()}),(a,s)=>{var b;const c=K,h=it,E=lt,H=rt,M=at,j=Z,q=X,F=Y,J=Q,N=ct,A=U;return l(),u(A,{row:20,loading:!((b=e.value)!=null&&b.id)},{default:i(()=>[t("div",ut,[r(H,{class:"my-swipe",autoplay:3e3,"indicator-color":"white"},{default:i(()=>[(l(!0),m(f,null,v(e.value.graphVoList,o=>(l(),u(E,{key:o.url},{default:i(()=>[r(h,{fit:"fill",src:o.url,width:"100vw",height:"35vh"},{error:i(()=>[y(n(a.$t("common.loadFailed")),1)]),loading:i(()=>[r(c,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1}),t("div",mt,[t("div",vt,n(`${e.value.name}`),1),t("div",ft,[(l(!0),m(f,null,v(e.value.labelInfoList,o=>(l(),u(M,{class:"last:mr-0 mr-[5px]",plain:"",key:o.id,type:"primary"},{default:i(()=>[y(n(o.name),1)]),_:2},1024))),128))]),t("div",null,[s[0]||(s[0]=t("span",{class:"text-red-500 text-[16px]"},"ï¿¥",-1)),t("span",ht,n(e.value.minRent)+"/"+n(a.$t("agreement.month")),1)])]),t("div",xt,[t("div",yt,n(a.$t("apartment.communityIntro")),1),t("div",gt,[r(_t,{text:e.value.introductionCn,"text-en":e.value.introductionEn,"text-ja":e.value.introductionJa},null,8,["text","text-en","text-ja"])])]),t("div",wt,[t("div",kt,n(a.$t("apartment.facilityInfo")),1),t("div",bt,[r(F,null,{default:i(()=>[(l(!0),m(f,null,v(e.value.facilityInfoList,o=>(l(),u(q,{span:"4",class:"my-[3px]",key:o.id},{default:i(()=>[t("div",It,[r(j,{name:o.icon,size:"25"},null,8,["name"]),t("span",Dt,n(o.name),1)])]),_:2},1024))),128))]),_:1})])]),t("div",Rt,[t("div",St,n(a.$t("apartment.locationDetail")),1),t("div",Tt,[t("div",Ct,n(e.value.addressDetail),1)]),t("div",{id:"container",class:"w-[85vw] h-[30vh]",onClick:$})]),t("div",Lt,[t("div",$t,n(a.$t("apartment.roomList")),1),t("div",Bt,[r(st,{request:T,ref_key:"pullDownRefreshContainerRef",ref:k,class:"min-h-[70vh] px-[10px]"},{default:i(()=>{var o;return[(o=p.value)!=null&&o.length?(l(!0),m(f,{key:0},v(p.value,I=>(l(),u(ot,{key:I.id,data:I},null,8,["data"]))),128)):G("",!0)]}),_:1},512)])]),r(N,{"offset-bottom":0,position:"bottom"},{default:i(()=>[r(J,{type:"primary",block:"",onClick:V},{default:i(()=>[y(n(a.$t("apartment.appointmentView")),1)]),_:1})]),_:1})])]),_:1},8,["loading"])}}});const Kt=S(Vt,[["__scopeId","data-v-c2d2948c"]]);export{Kt as default};
