import{t as a}from"./index-58f473f0.js";import{au as n,u as k,x as r}from"./index-b744bed0.js";const t=n(new Set);function m(){const{t:d}=k();return{handleLike:async e=>{try{const i=e.isLiked,s=e.liked||0;e.isLiked=!i,e.liked=i?Math.max(0,s-1):s+1,i?t.delete(e.id):t.add(e.id),await a(e.id)}catch(i){console.error("点赞操作错误:",i);const s=e.isLiked;e.isLiked=!s,e.liked=s?Math.max(0,(e.liked||0)-1):(e.liked||0)+1,e.isLiked?t.add(e.id):t.delete(e.id),r(d("community.operationFailed"))}},checkLikeStatus:e=>t.has(e),initLikeStatus:(e,i)=>{i&&t.add(e)}}}export{m as u};
