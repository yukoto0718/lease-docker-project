import{d as F,x as M,f as N,r as _,y as R,S as C,K as B,a as r,o as K,c as L,U as b,e as t,O as u,i as a,l as p,t as A,V as D,W as O,b as $,X as z,Y as H,p as W,q as X,Z as Y,_ as Z}from"./index-713ae778.js";import{t as j}from"./index-fded0fea.js";import{h as g}from"./index-4a51e267.js";import{g as V}from"./getEnv-7ad03cf8.js";function G(n){return g.post("/admin/login",n)}function J(){return g.get("/admin/login/captcha")}function Q(){return g.get("/admin/info")}const E=n=>(W("data-v-0082eec7"),n=n(),X(),n),ee={class:"login-container"},te=E(()=>p("div",{style:{color:"transparent"}},"左側エリアプレースホルダー",-1)),oe={class:"form-header"},ae=E(()=>p("div",{class:"title"},"hello !",-1)),se={class:"title-tips"},le=F({__name:"index",setup(n){const I=M(),U=N(),h=_(),v=R(),l=C({username:"user",password:"123456",captchaKey:"",captchaCode:""}),m=_(!1),S=C({username:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("ユーザー名を入力してください。")):e.length<4?o(new Error("ユーザー名は最低。4文字必要です")):o()}}],password:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("パスワードを入力してください。")):e.length<6?o(new Error("パスワードの長さを小さくしてはいけません6文字必要です")):o()}}],captchaCode:[{required:!0,validator:(s,e,o)=>{e===""?o(new Error("認証コードを入力してください")):o()}}]}),w=_({image:"",key:""}),y=async()=>{try{const{data:s}=await J();w.value=s,l.captchaKey=s.key}catch(s){console.log(s)}},T=s=>{s&&s.validate(async e=>{if(e)try{m.value=!0;const{data:o}=await G(l);v.setToken(o),I.replace(U.query.redirect||z);const i=await Q();v.setUserInfo(i.data),H({title:`hi,${j()}!`,message:"お帰りなさい",type:"success"})}finally{m.value=!1}})};return B(()=>{y()}),(s,e)=>{const o=r("el-alert"),i=r("el-col"),f=r("el-input"),c=r("el-form-item"),P=r("el-image"),x=r("el-row"),k=r("el-button"),q=r("el-form");return K(),L("div",ee,[b(t(o,{title:u(V)("VITE_APP_TITLE"),type:"success",closable:!1,style:{position:"fixed"}},null,8,["title"]),[[Y,!1]]),t(x,null,{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[te]),_:1}),t(i,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(q,{ref_key:"ruleFormRef",ref:h,model:l,"status-icon":"",rules:S,class:"login-form"},{default:a(()=>[p("div",oe,[ae,p("div",se," ようこそ"+A(u(V)("VITE_APP_TITLE"))+"！ ",1)]),t(c,{prop:"username"},{default:a(()=>[t(f,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=d=>l.username=d),modelModifiers:{trim:!0},"prefix-icon":u(D),autocomplete:"off",placeholder:"ユーザー名を入力してください"},null,8,["modelValue","prefix-icon"])]),_:1}),t(c,{prop:"password"},{default:a(()=>[t(f,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=d=>l.password=d),modelModifiers:{trim:!0},type:"password","show-password":"","prefix-icon":u(O),autocomplete:"off",placeholder:"パスワードを入力してください"},null,8,["modelValue","prefix-icon"])]),_:1}),t(c,{prop:"captchaCode"},{default:a(()=>[t(x,null,{default:a(()=>[t(i,{span:15},{default:a(()=>[t(f,{modelValue:l.captchaCode,"onUpdate:modelValue":e[2]||(e[2]=d=>l.captchaCode=d),modelModifiers:{trim:!0},autocomplete:"off",placeholder:"認証コードを入力してください。"},null,8,["modelValue"])]),_:1}),t(i,{span:8,offset:1},{default:a(()=>[t(P,{fit:"contain",style:{height:"100%",background:"white"},class:"pointer",src:w.value.image,onClick:y},null,8,["src"])]),_:1})]),_:1})]),_:1}),t(c,null,{default:a(()=>[t(k,{class:"login-btn",type:"primary",size:"large",loading:m.value,onClick:e[3]||(e[3]=d=>T(h.value))},{default:a(()=>[$(" ログイン ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}});const me=Z(le,[["__scopeId","data-v-0082eec7"]]);export{me as default};
