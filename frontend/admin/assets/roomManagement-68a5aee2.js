import{d as F,x as U,r as j,S as v,K as q,a as o,o as $,h as K,i as s,e as r,b as p,O as z,a1 as G,a0 as J}from"./index-713ae778.js";import{u as Q}from"./useHandleData-f763eae5.js";import{j as W,k as X,a as Y,l as Z,b as ee,c as ae,m as te}from"./index-99c15efc.js";import{R as le,g as h,c as b,d as f}from"./constEnums-bbb5bb0e.js";import"./index-4a51e267.js";function c(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!J(d)}const ce=F({__name:"roomManagement",setup(d){const m=U(),l=j(),t=v({provinceList:[],provinceId:"",cityList:[],cityId:"",districtList:[],districtId:"",apartmentList:[],apartmentId:""}),C=[{prop:"provinceId",label:"省",isShow:!1,fieldNames:{label:"name",value:"id"},search:{el:"select",render:()=>{let e;return r(o("el-select"),{modelValue:t.provinceId,"onUpdate:modelValue":a=>t.provinceId=a,placeholder:"请选择省",clearable:!0,key:"provinceId",onChange:P,onClear:E},c(e=t.provinceList.map(a=>r(o("el-option"),{key:a.id,label:a.name,value:a.id},null)))?e:{default:()=>[e]})}}},{prop:"cityId",label:"都市",isShow:!1,fieldNames:{label:"name",value:"id"},search:{el:"select",key:"cityId",render:()=>{let e;return r(o("el-select"),{modelValue:t.cityId,"onUpdate:modelValue":a=>t.cityId=a,placeholder:"请选择都市",clearable:!0,key:"cityId",onChange:N,onClear:M},c(e=t.cityList.map(a=>r(o("el-option"),{key:a.id,label:a.name,value:a.id},null)))?e:{default:()=>[e]})}}},{prop:"districtId",label:"エリア",isShow:!1,fieldNames:{label:"name",value:"id"},search:{el:"select",key:"districtId",render:()=>{let e;return r(o("el-select"),{modelValue:t.districtId,"onUpdate:modelValue":a=>t.districtId=a,placeholder:"请选择エリア",clearable:!0,onChange:V,onClear:S},c(e=t.districtList.map(a=>r(o("el-option"),{key:a.id,label:a.name,value:a.id},null)))?e:{default:()=>[e]})}}},{prop:"apartmentId",label:"アパート",isShow:!1,fieldNames:{label:"name",value:"id"},search:{el:"select",key:"apartmentId",render:()=>{let e;return r(o("el-select"),{modelValue:t.apartmentId,"onUpdate:modelValue":a=>t.apartmentId=a,placeholder:"请选择アパート",clearable:!0,onChange:A,onClear:D},c(e=t.apartmentList.map(a=>r(o("el-option"),{key:a.id,label:a.name,value:a.id},null)))?e:{default:()=>[e]})}}},{prop:"roomNumber",label:"部屋番号"},{prop:"rent",label:"家賃（元/げつ）"},{prop:"apartmentInfo.provinceName",label:"所处省"},{prop:"apartmentInfo.cityName",label:"所处都市"},{prop:"apartmentInfo.districtName",label:"所处エリア"},{prop:"apartmentInfo.name",label:"所处アパート"},{prop:"isCheckIn",label:"入居状態",render:({row:e})=>{let a,n;return e.isCheckIn===le.NOT_CHECK_IN?r(o("el-tag"),{type:"info"},c(a=h(b,e.isCheckIn))?a:{default:()=>[a]}):r(o("el-tag"),{type:"success"},c(n=h(b,e.isCheckIn))?n:{default:()=>[n]})}},{prop:"isRelease",label:"公開状態",render:({row:e})=>r(o("el-switch"),{"active-value":f.RELEASED,"inactive-value":f.NOT_RELEASED,modelValue:e.isRelease,"onUpdate:modelValue":a=>e.isRelease=a,onChange:()=>X(e.id,e.isRelease)},null)},{prop:"operation",label:"操作",fixed:"right",width:230}],g=v({});async function k(){var e;try{const{data:a}=await Y();t.provinceList=a,(e=l.value)==null||e.enumMap.set("provinceId",t.provinceList)}catch(a){console.log(a)}}async function L(e){var a;try{const{data:n}=await ee(e);t.cityList=n,(a=l.value)==null||a.enumMap.set("cityId",t.cityList)}catch(n){console.log(n)}}async function _(e){var a;try{const{data:n}=await ae(e);t.districtList=n,(a=l.value)==null||a.enumMap.set("districtId",t.districtList)}catch(n){console.log(n)}}async function R(e){var a;try{const{data:n}=await te(e);t.apartmentList=n,(a=l.value)==null||a.enumMap.set("apartmentId",t.apartmentList)}catch(n){console.log(n)}}function I(){var e;t.cityId="",t.cityList=[],(e=l.value)==null||e.enumMap.set("cityId",[]),l.value.searchParam.cityId=""}function u(){var e;t.districtId="",t.districtList=[],(e=l.value)==null||e.enumMap.set("districtId",[]),l.value.searchParam.districtId=""}function i(){var e;t.apartmentId="",t.apartmentList=[],(e=l.value)==null||e.enumMap.set("apartmentId",[]),l.value.searchParam.apartmentId=""}const P=async()=>{let e=l.value.searchParam.provinceId;e&&(I(),u(),i(),await L(e))},E=()=>{t.provinceId="",l.value.searchParam.provinceId="",I(),u(),i()},N=async()=>{let e=l.value.searchParam.cityId;e&&(u(),i(),await _(e))},M=()=>{console.log("清空都市"),t.cityId="",l.value.searchParam.cityId="",u(),i()},V=async()=>{let e=l.value.searchParam.districtId;e&&(i(),await R(e))},S=()=>{console.log("清空エリア"),t.districtId="",l.value.searchParam.districtId="",i()},A=async()=>{console.log("アパート改变")},D=()=>{console.log("清空アパート"),t.apartmentId="",l.value.searchParam.apartmentId=""},H=e=>({list:e==null?void 0:e.records,total:e==null?void 0:e.total}),w=e=>{console.log(e),m.push({path:"/apartmentManagement/roomManagement/addOrEditRoom",query:{id:e.id}})},B=()=>{m.push({path:"/apartmentManagement/roomManagement/addOrEditRoom"})},O=async e=>{var a;await Q(Z,e.id,`削除${e.apartmentInfo.name+e.roomNumber}部屋`),(a=l.value)==null||a.getTableList()};return q(()=>{k()}),(e,a)=>{const n=o("el-button"),T=o("el-card");return $(),K(T,null,{default:s(()=>[r(G,{ref_key:"proTable",ref:l,dataCallback:H,columns:C,requestApi:z(W),initParam:g,stripe:!0},{tableHeader:s(()=>[r(n,{type:"primary",icon:"Plus",onClick:B},{default:s(()=>[p(" 部屋を増やし ")]),_:1})]),operation:s(y=>[r(n,{type:"success",icon:"Edit",onClick:x=>w(y.row)},{default:s(()=>[p(" 編集 ")]),_:2},1032,["onClick"]),r(n,{type:"danger",icon:"Delete",onClick:x=>O(y.row)},{default:s(()=>[p(" 削除 ")]),_:2},1032,["onClick"])]),_:1},8,["requestApi","initParam"])]),_:1})}}});export{ce as default};
